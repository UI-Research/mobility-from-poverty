---
title: "Geographic Harmonization Guide"
author: "Manu Alcalá Kovalski"
date: today
format:
  html:
    toc: true
    toc_float: true
    embed-resources: true
    code-fold: show
execute: 
  warning: false
editor_options: 
  chunk_output_type: console
---

```{r}
#| label: setup
library(tidyverse)
library(here)
```

## Overview

This document includes the number of geographies in each year, justifications for decisions, and documentations of important changes to geographies. In particular, it articulates a plan to answer these big questions:

-   What are all of the geographic crosswalks we need?
-   What time perspective should we use? For example, should we report Connecticut data for the nine planning regions before 2022 or use the eight counties?
-   We use a population threshold to identify large cities. Should this change over time as cities grow and shrink?

## How Geographies Relate from Year-to-Year

Each year some new entities come into existence and other entities are dissolved. This may be the result of new incorporations or statistical delineations, the redrawing or splitting of administrative areas, disincorporations, mergers and consolidations, and other types of changes.

Check out the Census's comphrensive [guide](https://www.census.gov/programs-surveys/geography/technical-documentation/county-changes.2010.html#list-tab-957819518) to all the changes to US census geographies to learn more.

### How many county and county-equivalents are in our data?

We have 3,142 counties and county-equivalents for 2014-2018, 3,143 for 2020-2021, and 3,144 in 2022. The average number of counties per state is 62, but the number varies from three in Delaware to 254 in Texas.


```{r}
#| label: load-output-data

county_data <- read_csv(here::here("data/11_mobility-metrics_county_longitudinal.csv"))

county_data |>
  count(year)
```

There are two important changes to note:

#### Alaska county splits

In 2019, the Alaskan county of Valdez-Cordova was split into **Cugach Census Area** and **Copper River Census Area.** Therefore, the number of counties and county-equivalents is 3,143 for 2020 and 2021.

#### Connecticut Planning Regions

The number of US counties increased in 2022 **due to a new county-equivalent map for Connecticut, which better reflected the state's governance system**. The new map divided Connecticut into nine counties, instead of the previous eight. 

Connecticut’s historical eight counties stopped serving as functioning governmental or administrative units in 1960. Currently, Connecticut has nine [Regional Councils of Government](https://portal.ct.gov/OPM/IGPP/ORG/Planning-Regions/Planning-Regions---Overview) (COG) that carry out regional planning and service delivery activities similar to those performed by county-level governments in other states.Planning regions are administrative entities that have have the same boundaries as the state’s COGs.

The Census Bureau used to release data based on Connecticut’s eight counties, but starting in 2023, it switched to reporting data for the nine planning regions, following a 2019 request from the state’s Office of Planning and Management. Since new data products will include planning regions, *we should make sure to use them instead of the historical counties moving forward*. 

See the map below for the planning region boundaries, the towns within each planning region, and historical county boundaries (delineated by thick white borders)

![](images/ct-planning-regions.png)

::: callout-note
County-equivalent planning regions will simply be referred to as “counties” in Census Bureau data products, although the geographic units will be labeled with the names of the planning regions instead of counties.
:::


### How many places are in our data?

Our final data contains incorporated places with populations greater than 75,000. The number of places in our data is 485 for 2015-2017 and 486 from 2018-2022. This is because the Census Bureau [added South Fulton City, GA in 2017](https://www.census.gov/programs-surveys/acs/technical-documentation/table-and-geography-changes/2018/geography-changes.html).

```{r}
places_data <- read_csv(here::here("data/61_mobility-metrics_place_longitudinal.csv"))

places_data |>
  count(year)
```


## How reporting geographies relate to target geographies

How geographies where data are reported (e.g. PUMAs and ZCTAs) relate to to our target geographies (counties and populous census places).

TBD
