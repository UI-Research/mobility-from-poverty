---
title: "Access to pre-kindergarten Predictor, Place-level"
author: "JP Walsh"
date: today
format:
  html:
    toc: true
    toc_float: true
    embed-resources: true
    code-fold: show
execute: 
  warning: false
editor_options: 
  chunk_output_type: console

---

*Program for the creation of the Access to Pre-Kindergarten Upward Mobility Predictor at the place-level*

ACS Code: Initially written by Tina Chelidze and updated by JP Walsh 2024.

Primary data derived from the IPUMS API.

Based on processes developed by Paul Johnson and Kevin Werner in SAS.

*User warning* The ACS micro data used to create this metric is large and will take time to read in. It is strongly recommended that you use a server with significant computing power to run this.

## Housekeeping

Read in packages for use. If you do not have an IPUMS API key you will need to make one via the [IPUMS website](https://www.ipums.org/).

```{r, results='hide'}
library(tidyverse)
library(Hmisc)
library(ipumsr)
library(reactable)
library(srvyr)
library(scales)


options(scipen = 999)


# DO NOT PUSH YOUR API KEY. You only have to run this once and then comment it out as below.
#set_ipums_api_key("Your KEY", save = TRUE)

s3_dir <- "metric_name/data/acs"
my_bucket <- "mobility-from-poverty-test"

source(here::here("functions", "API", "extract_ipums_draft.R"))
source(here::here("functions", "API", "ipums_repwt_pre-k_draft.R"))
source(here::here("08_education", "R", "finalize_metric.R"))
source(here::here("08_education", "R", "calc_survey_mean.R"))
source(here::here("08_education", "R", "calc_survey_mean_subgroup.R"))
```

## Years

```{r}
years <- c(2014, 2016, 2018, 2021, 2023)

year <- years[1]
```

```{r}
#| echo: true
#| eval: false # skip evaluation
#| file: here::here("08_education", "preschool_place_calculate.qmd")
```

