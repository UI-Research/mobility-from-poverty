---
title: "Recent Data"
format: 
  html:
    number-depth: 2
editor_options: 
  chunk_output_type: console
---

```{r}
library(tidyverse)

source("R/get_years.R")
source("R/summarize_metric.R")

mm <- read_csv("../data/01_mobility-metrics.csv")

mm_longitudinal <- read_csv("../data/00_mobility-metrics_longitudinal.csv")

```

## State

`state`
`state_name`

## County

`county`
`county_name`

## Population

`population`

## Predictor: Housing Affordablility

### Metric: Ratio of affordable and available housing units to households with low-, very low–, and extremely low income levels

**Variables:** `share_affordable_30_ami`, `share_affordable_50_ami`, `share_affordable_80_ami`, `housing_quality`

**Years:** `r get_years(mm_longitudinal, var = share_affordable_30_ami, max = TRUE)`

**Disaggregation:** (link)

```{r}
#| results: asis
summarize_metric(
  .data = mm, 
  var = share_affordable_30_ami, 
  housing_quality
)

summarize_metric(
  .data = mm, 
  var = share_affordable_50_ami, 
  housing_quality
)

summarize_metric(
  .data = mm, 
  var = share_affordable_80_ami, 
  housing_quality
)

```

---

## Predictor: Housing Stability

### Metric: Number and share of public school children who are ever homeless during the school year

**Variables:** `homeless_count`, `homeless_share`, `homeless_count_lb`, `homeless_count_ub`, `homeless_quality`

**Years:** `r get_years(mm_longitudinal, var = homeless_quality, max = TRUE)`

**Disaggregation:** (link)

```{r}
#| results: asis
summarize_metric(
  .data = mm, 
  var = homeless_count, 
  quality_var = homeless_quality,
  decimals = 0
)

summarize_metric(
  .data = mm, 
  var = homeless_share, 
  quality_var = homeless_quality
)

```

---

## Predictor: Economic Inclusion

### Metric: Share of residents experiencing poverty living in high-poverty neighborhoods

**Variables:** `poverty_exposure`, `poverty_exposure_quality`

**Years:** `r get_years(mm_longitudinal, var = poverty_exposure_quality, max = TRUE)`

**Disaggregation:** (link)

```{r}
#| results: asis
summarize_metric(
  .data = mm, 
  var = poverty_exposure, 
  quality_var = poverty_exposure_quality
)

```

---

## Predictor: Racial Diversity

### Metric: Neighborhood exposure index, or the share of a person’s neighbors who are people of other races and ethnicities

**Variables:** `black_nh_exposure`, `black_nh_exposure_quality`, `hispanic_exposure`, `hispanic_exposure_quality`, `other_nh_exposure`, `other_nh_exposure_quality`, `white_nh_exposure`, `white_nh_exposure_quality`

**Years:** `r get_years(mm_longitudinal, var = black_nh_exposure_quality, max = TRUE)`

**Disaggregation:** (link)

```{r}
#| results: asis
summarize_metric(
  .data = mm, 
  var = black_nh_exposure, 
  quality_var = black_nh_exposure_quality
)

summarize_metric(
  .data = mm, 
  var = hispanic_exposure, 
  quality_var = hispanic_exposure_quality
)

summarize_metric(
  .data = mm, 
  var = other_nh_exposure, 
  quality_var = other_nh_exposure_quality
)

summarize_metric(
  .data = mm, 
  var = white_nh_exposure, 
  quality_var = white_nh_exposure_quality
)

```

---

## Predictor: Social Capital

### Metric: Number of membership associations per 10,000 people

**Variables:** TBD

**Years:**

**Disaggregation:** (link)

---

## Predictor: Transportation Access

### Metric: Transit trips index

**Variables:** `transit_cost`, `transit_cost_quality`, `transit_trips`, `transit_trips_quality`

**Years:** `r get_years(mm_longitudinal, var = transit_trips_quality, max = TRUE)`

**Disaggregation:** (link)

```{r}
#| results: asis
summarize_metric(
  .data = mm, 
  var = transit_trips, 
  quality_var = transit_trips_quality
)

summarize_metric(
  .data = mm, 
  var = transit_cost, 
  quality_var = transit_cost_quality
)

```

---

## Predictor: Access to Preschool

### Metric: Share of 3- to 4-year-olds enrolled in nursery school or preschool

**Variables:** `share_in_preschool`, `share_in_preschool_lb`, `share_in_preschool_ub`, `preschool_quality`

**Years:**

**Disaggregation:** (link)

```{r}
#| results: asis
summarize_metric(
  .data = mm, 
  var = share_in_preschool, 
  quality_var = preschool_quality
)

```

---

## Predictor: Effective Public Education

### Metric: Average per grade change in English Language Arts achievement between third and eighth grades

**Variables:** `learning_rate`, `learning_rate_lb`, `learning_rate_ub`, `learning_rate_quality`

**Years:** `r get_years(mm_longitudinal, var = learning_rate_quality, max = TRUE)`

**Disaggregation:** (link)

```{r}
#| results: asis
summarize_metric(
  .data = mm, 
  var = learning_rate, 
  quality_var = learning_rate_quality
)

```

---

## Predictor: School Economic Diversity

### Metric: Share of students attending high-poverty schools, by student race or ethnicity

**Variables:** TBD

**Years:**

**Disaggregation:** (link)

---

## Predictor: Preparation for College

### Metric: Share of 19- and 20-year-olds with a high school degree

**Variables:** `share_hs_degree`, `share_hs_degree_lb`, `share_hs_degree_ub`, `hs_degree_quality`

**Years:** `r get_years(mm_longitudinal, var = hs_degree_quality, max = TRUE)`

**Disaggregation:** (link)

```{r}
#| results: asis
summarize_metric(
  .data = mm, 
  var = share_hs_degree, 
  quality_var = hs_degree_quality
)

```

---

## Predictor: Digital Access

### Metric: Share of households with broadband access in the home

**Variables:** TBD

**Years:**

**Disaggregation:** (link)

---

## Predictor: Employment Opportunities

### Metric: Employment-to-population ratio for adults ages 25 to 54

**Variables:** `share_employed`, `share_employed_lb`, `share_employed_ub`, `employed_quality`

**Years:** `r get_years(mm_longitudinal, var = employed_quality, max = TRUE)`

**Disaggregation:** (link)

```{r}
#| results: asis
summarize_metric(
  .data = mm, 
  var = share_employed, 
  quality_var = employed_quality
)

```

---

## Predictor: Jobs Paying Living Wages

### Metric: Ratio of pay on the average job to the cost of living

**Variables:** `average_to_living_wage_ratio`, `wage_ratio_quality`

**Years:** `r get_years(mm_longitudinal, var = wage_ratio_quality, max = TRUE)`

**Disaggregation:** (link)

```{r}
#| results: asis
summarize_metric(
  .data = mm, 
  var = average_to_living_wage_ratio, 
  quality_var = wage_ratio_quality
)

```

---

## Predictor: Opportunities for Income

### Metric: Household income at the 20th, 50th, and 80th percentiles

**Variables:** `pctl_20`, `pctl_50`, `pctl_80`, `pctl_quality`

**Years:** `r get_years(mm_longitudinal, var = pctl_quality, max = TRUE)`

**Disaggregation:** (link)

```{r}
#| results: asis
summarize_metric(
  .data = mm, 
  var = pctl_20, 
  quality_var = pctl_quality
)

summarize_metric(
  .data = mm, 
  var = pctl_50, 
  quality_var = pctl_quality
)

summarize_metric(
  .data = mm, 
  var = pctl_80, 
  quality_var = pctl_quality
)

```

---

## Predictor: Financial Security

### Metric: Share with debt in collections

**Variables:** `share_debt_coll`, `share_debt_coll_lb`, `share_debt_coll_ub`, `share_debt_coll_quality`

**Years:** `r get_years(mm_longitudinal, var = share_debt_coll_quality, max = TRUE)`

**Disaggregation:** (link)

```{r}
#| results: asis
summarize_metric(
  .data = mm, 
  var = share_debt_coll, 
  quality_var = share_debt_coll_quality
)

```

---

## Predictor: Wealth Building Opportunities

### Metric: Ratio of the share of a community’s housing wealth held by a racial or ethnic group to the share of households of the same group

**Variables:** TBD

**Years:** 

**Disaggregation:** (link)

---

## Predictor: Access to Health Services

### Metric: Ratio of population per primary care physician

**Variables:** TBD

**Years:** 

**Disaggregation:** (link)

---

## Predictor: Neonatal Health

### Metric: Share of low-weight births

**Variables:** `lbw`, `lbw_quality`

**Years:** `r get_years(mm_longitudinal, var = lbw_quality, max = TRUE)`

**Disaggregation:** (link)

```{r}
#| results: asis
summarize_metric(
  .data = mm, 
  var = lbw, 
  quality_var = lbw_quality
)

```

---

## Predictor: Environmental Quality

### Metric: Air quality index

**Variables:** `environmental`, `environmental_quality`

**Years:** `r get_years(mm_longitudinal, var = environmental_quality, max = TRUE)`

**Disaggregation:** (link)

```{r}
#| results: asis
summarize_metric(
  .data = mm, 
  var = environmental, 
  quality_var = environmental_quality
)

```

---

## Predictor: Safety from Trauma

### Metric: Number of deaths caused by injury per 100,000 people

**Variables:** TBD

**Years:** 

**Disaggregation:** (link)

---

## Predictor: Political Participation

### Metric: Share of the voting-eligible population who turn out to vote

**Variables:** `election_turnout`, `election_turnout_quality`

**Years:** `r get_years(mm_longitudinal, var = election_turnout_quality, max = TRUE)`

**Disaggregation:** (link)

```{r}
#| results: asis
summarize_metric(
  .data = mm, 
  var = election_turnout, 
  quality_var = election_turnout_quality
)

```

---

## Predictor: Descriptive Representation

### Metric: Ratio of the share of local elected officials of a racial or ethnic group to the share of residents of the same racial or ethnic group

**Variables:** `asian_other`, `asian_other_quality`, `black_nonhispanic`, `black_nonhispanic_quality`, `hispanic`, `hispanic_quality`, `white_nonhispanic`, `white_nonhispanic_quality`

**Years:** `r get_years(mm_longitudinal, var = asian_other_quality, max = TRUE)`

**Disaggregation:** (link)

```{r}
#| results: asis
summarize_metric(
  .data = mm, 
  var = asian_other, 
  quality_var = asian_other_quality
)

summarize_metric(
  .data = mm, 
  var = black_nonhispanic, 
  quality_var = black_nonhispanic_quality
)

summarize_metric(
  .data = mm, 
  var = hispanic, 
  quality_var = hispanic_quality
)

summarize_metric(
  .data = mm, 
  var = white_nonhispanic, 
  quality_var = white_nonhispanic_quality
)

```

---

## Predictor: Safety from Crime

### Metric: Rates of reported violent crime and property crime

**Variables:** TBD

**Years:** 

**Disaggregation:** (link)

Was `violent_crime_rate`, will be something new
Was `property_crime_rate`, will be something new
`crime_rate_quality`

---

## Predictor: Just Policing

### Metric: Rate of juvenile justice arrests

**Variables:** `juvenile_arrest_rate`, `juvenile_arrest_rate_quality`

**Years:** `r get_years(mm_longitudinal, var = juvenile_arrest_rate_quality, max = TRUE)`

**Disaggregation:** (link)

```{r}
#| results: asis
summarize_metric(
  .data = mm, 
  var = juvenile_arrest_rate, 
  quality_var = juvenile_arrest_rate_quality
)

```
