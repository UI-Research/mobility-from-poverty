<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.2.269">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="">
<meta name="dcterms.date" content="2023-07-26">

<title>metrics_quality</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1.6em;
  vertical-align: middle;
}
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<script src="metrics_quality_files/libs/clipboard/clipboard.min.js"></script>
<script src="metrics_quality_files/libs/quarto-html/quarto.js"></script>
<script src="metrics_quality_files/libs/quarto-html/popper.min.js"></script>
<script src="metrics_quality_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="metrics_quality_files/libs/quarto-html/anchor.min.js"></script>
<link href="metrics_quality_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="metrics_quality_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="metrics_quality_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="metrics_quality_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="metrics_quality_files/libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">

<script src="metrics_quality_files/libs/core-js-2.5.3/shim.min.js"></script>
<script src="metrics_quality_files/libs/react-17.0.0/react.min.js"></script>
<script src="metrics_quality_files/libs/react-17.0.0/react-dom.min.js"></script>
<script src="metrics_quality_files/libs/reactwidget-1.0.0/react-tools.js"></script>
<script src="metrics_quality_files/libs/htmlwidgets-1.6.2/htmlwidgets.js"></script>
<link href="metrics_quality_files/libs/reactable-0.4.4/reactable.css" rel="stylesheet">
<script src="metrics_quality_files/libs/reactable-binding-0.4.4/reactable.js"></script>


<link rel="stylesheet" href="10_construct-database/www/web_report.css">
</head>

<body>

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">
<div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
  <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#file-quality-counties" id="toc-file-quality-counties" class="nav-link active" data-scroll-target="#file-quality-counties">File Quality Counties</a>
  <ul class="collapse">
  <li><a href="#all-counties" id="toc-all-counties" class="nav-link" data-scroll-target="#all-counties">All counties</a></li>
  </ul></li>
  <li><a href="#file-quality-place" id="toc-file-quality-place" class="nav-link" data-scroll-target="#file-quality-place">File Quality Place</a>
  <ul class="collapse">
  <li><a href="#all-places-in-dataset" id="toc-all-places-in-dataset" class="nav-link" data-scroll-target="#all-places-in-dataset">All places in dataset</a></li>
  <li><a href="#comparable-places" id="toc-comparable-places" class="nav-link" data-scroll-target="#comparable-places">Comparable places</a></li>
  </ul></li>
  </ul>
</nav>
</div>
<main class="content" id="quarto-document-content">



<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">options</span>(<span class="at">scipen =</span> <span class="dv">999</span>)</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidycensus)</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(urbnthemes)</span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(reactable)</span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(readxl)</span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a><span class="fu">set_urbn_defaults</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<section id="file-quality-counties" class="level1">
<h1>File Quality Counties</h1>
<section id="all-counties" class="level2">
<h2 class="anchored" data-anchor-id="all-counties">All counties</h2>
<p>The following table shows the 15 “highest” data quality counties based on a scoring metric. The scoring metric weights data quality results for all variables in the county level data and sums the result of the scores; good data quality is given a weight of 2, marginal 1, poor -1 and missing -2. This method makes the assumption missing data lowers quality more than poor quality data. The highest score is 66 (all good quality, no missing) and 9 out of the 15 highest quality counties have a perfect score.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>metrics_county <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(here<span class="sc">::</span><span class="fu">here</span>(<span class="st">"data"</span>, <span class="st">"00_mobility-metrics_recent.csv"</span>))</span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>metrics_quality_county <span class="ot">&lt;-</span> metrics_county <span class="sc">%&gt;%</span></span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(county_name, state_name, <span class="fu">ends_with</span>(<span class="st">"_quality"</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_longer</span>(<span class="at">cols =</span> <span class="sc">-</span><span class="fu">c</span>(state_name, county_name)) <span class="sc">%&gt;%</span></span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(state_name, county_name) <span class="sc">%&gt;%</span></span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">quality_good =</span> <span class="fu">sum</span>(value <span class="sc">==</span> <span class="dv">1</span>, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a>            <span class="at">quality_marginal =</span> <span class="fu">sum</span>(value <span class="sc">==</span> <span class="dv">2</span>, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb2-9"><a href="#cb2-9" aria-hidden="true" tabindex="-1"></a>            <span class="at">quality_poor =</span> <span class="fu">sum</span>(value <span class="sc">==</span> <span class="dv">3</span>, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb2-10"><a href="#cb2-10" aria-hidden="true" tabindex="-1"></a>            <span class="at">missing_values =</span> <span class="fu">sum</span>(<span class="fu">is.na</span>(value))) <span class="sc">%&gt;%</span> </span>
<span id="cb2-11"><a href="#cb2-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">total_metrics =</span> quality_good <span class="sc">+</span> quality_marginal <span class="sc">+</span> quality_poor <span class="sc">+</span> missing_values,</span>
<span id="cb2-12"><a href="#cb2-12" aria-hidden="true" tabindex="-1"></a>         <span class="at">shr_good =</span> quality_good <span class="sc">/</span> total_metrics,</span>
<span id="cb2-13"><a href="#cb2-13" aria-hidden="true" tabindex="-1"></a>         <span class="at">shr_poor =</span> quality_poor <span class="sc">/</span> total_metrics,</span>
<span id="cb2-14"><a href="#cb2-14" aria-hidden="true" tabindex="-1"></a>         <span class="at">shr_missing =</span> missing_values <span class="sc">/</span> total_metrics,</span>
<span id="cb2-15"><a href="#cb2-15" aria-hidden="true" tabindex="-1"></a>         <span class="at">good_score =</span> quality_good <span class="sc">*</span> <span class="dv">2</span>,</span>
<span id="cb2-16"><a href="#cb2-16" aria-hidden="true" tabindex="-1"></a>         <span class="at">marginal_score =</span> quality_marginal,</span>
<span id="cb2-17"><a href="#cb2-17" aria-hidden="true" tabindex="-1"></a>         <span class="at">poor_score =</span> quality_poor <span class="sc">*</span> <span class="sc">-</span><span class="dv">1</span>,</span>
<span id="cb2-18"><a href="#cb2-18" aria-hidden="true" tabindex="-1"></a>         <span class="at">missing_score =</span> missing_values <span class="sc">*</span> <span class="sc">-</span><span class="dv">2</span>,</span>
<span id="cb2-19"><a href="#cb2-19" aria-hidden="true" tabindex="-1"></a>         <span class="at">total_score =</span> good_score <span class="sc">+</span> marginal_score <span class="sc">+</span> poor_score <span class="sc">+</span> missing_score) </span>
<span id="cb2-20"><a href="#cb2-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-21"><a href="#cb2-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-22"><a href="#cb2-22" aria-hidden="true" tabindex="-1"></a><span class="co">#write_csv(metrics_quality_county, here::here("10_construct-database", "mobility-metrics-quality-county.csv"))</span></span>
<span id="cb2-23"><a href="#cb2-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-24"><a href="#cb2-24" aria-hidden="true" tabindex="-1"></a>metrics_quality_county <span class="sc">%&gt;%</span></span>
<span id="cb2-25"><a href="#cb2-25" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(state_name, county_name, total_score, shr_good, shr_missing) <span class="sc">%&gt;%</span> </span>
<span id="cb2-26"><a href="#cb2-26" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(total_score)) <span class="sc">%&gt;%</span> </span>
<span id="cb2-27"><a href="#cb2-27" aria-hidden="true" tabindex="-1"></a>  <span class="fu">head</span>(<span class="dv">15</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb2-28"><a href="#cb2-28" aria-hidden="true" tabindex="-1"></a>  <span class="fu">reactable</span>(</span>
<span id="cb2-29"><a href="#cb2-29" aria-hidden="true" tabindex="-1"></a>    <span class="co"># columns = list(</span></span>
<span id="cb2-30"><a href="#cb2-30" aria-hidden="true" tabindex="-1"></a>    <span class="co">#   density = colDef(format = colFormat(digits = 1)),</span></span>
<span id="cb2-31"><a href="#cb2-31" aria-hidden="true" tabindex="-1"></a>    <span class="co">#   non_hispanic_white = colDef(format = colFormat(digits = 2)),</span></span>
<span id="cb2-32"><a href="#cb2-32" aria-hidden="true" tabindex="-1"></a>    <span class="co">#   black = colDef(format = colFormat(digits = 2)),</span></span>
<span id="cb2-33"><a href="#cb2-33" aria-hidden="true" tabindex="-1"></a>    <span class="co">#   hispanic_or_latino = colDef(format = colFormat(digits = 2)),</span></span>
<span id="cb2-34"><a href="#cb2-34" aria-hidden="true" tabindex="-1"></a>    <span class="co">#   foreign_born = colDef(format = colFormat(digits = 2)),</span></span>
<span id="cb2-35"><a href="#cb2-35" aria-hidden="true" tabindex="-1"></a>    <span class="co">#   poverty = colDef(format = colFormat(digits = 2))</span></span>
<span id="cb2-36"><a href="#cb2-36" aria-hidden="true" tabindex="-1"></a>    <span class="co"># ),</span></span>
<span id="cb2-37"><a href="#cb2-37" aria-hidden="true" tabindex="-1"></a>    <span class="at">filterable =</span> <span class="cn">TRUE</span>,</span>
<span id="cb2-38"><a href="#cb2-38" aria-hidden="true" tabindex="-1"></a>    <span class="at">searchable =</span> <span class="cn">FALSE</span>,</span>
<span id="cb2-39"><a href="#cb2-39" aria-hidden="true" tabindex="-1"></a>    <span class="at">defaultPageSize =</span> <span class="dv">15</span>,</span>
<span id="cb2-40"><a href="#cb2-40" aria-hidden="true" tabindex="-1"></a>    <span class="at">highlight =</span> <span class="cn">TRUE</span></span>
<span id="cb2-41"><a href="#cb2-41" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">

<div class="reactable html-widget html-fill-item-overflow-hidden html-fill-item" id="htmlwidget-23a68bb76cc3300f0ab1" style="width:auto;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-23a68bb76cc3300f0ab1">{"x":{"tag":{"name":"Reactable","attribs":{"data":{"state_name":["Connecticut","Indiana","North Carolina","North Carolina","Rhode Island","Texas","Virginia","Virginia","Virginia","Michigan","North Carolina","Texas","Alabama","Connecticut","Connecticut"],"county_name":["Fairfield County","Allen County","Alamance County","Union County","Providence County","Jefferson County","Loudoun County","Stafford County","Virginia Beach city","Wayne County","Cumberland County","Denton County","Jefferson County","Hartford County","New Haven County"],"total_score":[66,66,66,66,66,66,66,66,66,65,65,65,64,64,64],"shr_good":[1,1,1,1,1,1,1,1,1,0.96969696969697,0.96969696969697,0.96969696969697,0.939393939393939,0.939393939393939,0.939393939393939],"shr_missing":[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]},"columns":[{"id":"state_name","name":"state_name","type":"character"},{"id":"county_name","name":"county_name","type":"character"},{"id":"total_score","name":"total_score","type":"numeric"},{"id":"shr_good","name":"shr_good","type":"numeric"},{"id":"shr_missing","name":"shr_missing","type":"numeric"}],"filterable":true,"defaultPageSize":15,"highlight":true,"dataKey":"1a16d35b1ce96384ea23ff90ceec5317"},"children":[]},"class":"reactR_markup"},"evals":[],"jsHooks":[]}</script>
</div>
</div>
<p>The following table shows the 15 “lowest” data quality counties based on the scoring metric described above. The lowest possible score is -66, and the worst county has a score of -49. Several very remote counties (two in Alaska, one in Hawaii), are outliers for worst quality.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a>metrics_quality_county <span class="sc">%&gt;%</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(state_name, county_name, total_score, shr_good, shr_missing) <span class="sc">%&gt;%</span> </span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(total_score) <span class="sc">%&gt;%</span> </span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">head</span>(<span class="dv">15</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">reactable</span>(</span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a>    <span class="co"># columns = list(</span></span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a>    <span class="co">#   density = colDef(format = colFormat(digits = 1)),</span></span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a>    <span class="co">#   non_hispanic_white = colDef(format = colFormat(digits = 2)),</span></span>
<span id="cb3-9"><a href="#cb3-9" aria-hidden="true" tabindex="-1"></a>    <span class="co">#   black = colDef(format = colFormat(digits = 2)),</span></span>
<span id="cb3-10"><a href="#cb3-10" aria-hidden="true" tabindex="-1"></a>    <span class="co">#   hispanic_or_latino = colDef(format = colFormat(digits = 2)),</span></span>
<span id="cb3-11"><a href="#cb3-11" aria-hidden="true" tabindex="-1"></a>    <span class="co">#   foreign_born = colDef(format = colFormat(digits = 2)),</span></span>
<span id="cb3-12"><a href="#cb3-12" aria-hidden="true" tabindex="-1"></a>    <span class="co">#   poverty = colDef(format = colFormat(digits = 2))</span></span>
<span id="cb3-13"><a href="#cb3-13" aria-hidden="true" tabindex="-1"></a>    <span class="co"># ),</span></span>
<span id="cb3-14"><a href="#cb3-14" aria-hidden="true" tabindex="-1"></a>    <span class="at">filterable =</span> <span class="cn">TRUE</span>,</span>
<span id="cb3-15"><a href="#cb3-15" aria-hidden="true" tabindex="-1"></a>    <span class="at">searchable =</span> <span class="cn">FALSE</span>,</span>
<span id="cb3-16"><a href="#cb3-16" aria-hidden="true" tabindex="-1"></a>    <span class="at">defaultPageSize =</span> <span class="dv">15</span>,</span>
<span id="cb3-17"><a href="#cb3-17" aria-hidden="true" tabindex="-1"></a>    <span class="at">highlight =</span> <span class="cn">TRUE</span></span>
<span id="cb3-18"><a href="#cb3-18" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">

<div class="reactable html-widget html-fill-item-overflow-hidden html-fill-item" id="htmlwidget-00247b1645268fda7911" style="width:auto;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-00247b1645268fda7911">{"x":{"tag":{"name":"Reactable","attribs":{"data":{"state_name":["Alaska","Alaska","Hawaii","Texas","Nebraska","Texas","Texas","Nebraska","Mississippi","Nebraska","Nebraska","Nebraska","Texas","Nebraska","Nevada"],"county_name":["Copper River Census Area","Chugach Census Area","Kalawao County","Loving County","Blaine County","Kenedy County","King County","Arthur County","Issaquena County","Loup County","McPherson County","Wheeler County","Terrell County","Keya Paha County","Esmeralda County"],"total_score":[-49,-47,-43,-27,-19,-18,-17,-14,-11,-11,-11,-11,-11,-10,-10],"shr_good":[0.0882352941176471,0.117647058823529,0.121212121212121,0.151515151515152,0.181818181818182,0.212121212121212,0.151515151515152,0.181818181818182,0.181818181818182,0.181818181818182,0.212121212121212,0.242424242424242,0.212121212121212,0.242424242424242,0.181818181818182],"shr_missing":[0.823529411764706,0.794117647058823,0.666666666666667,0.454545454545455,0.424242424242424,0.363636363636364,0.333333333333333,0.393939393939394,0.363636363636364,0.303030303030303,0.333333333333333,0.363636363636364,0.272727272727273,0.393939393939394,0.333333333333333]},"columns":[{"id":"state_name","name":"state_name","type":"character"},{"id":"county_name","name":"county_name","type":"character"},{"id":"total_score","name":"total_score","type":"numeric"},{"id":"shr_good","name":"shr_good","type":"numeric"},{"id":"shr_missing","name":"shr_missing","type":"numeric"}],"filterable":true,"defaultPageSize":15,"highlight":true,"dataKey":"0a996ee3012adc744c6570e3c8931286"},"children":[]},"class":"reactR_markup"},"evals":[],"jsHooks":[]}</script>
</div>
</div>
<p>##Comparable counties</p>
<p>Given that Cook county is in the high 99th percentile of counties by household count we may want to focus on comprable counties by size. This table shows the 15 highest quality counties in the 95th percentile (which includes 161 counties) based on household size using the scoring method described above. There are three “perfect quality” counties in this group and the rest are either 1 or 2 points away.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="fu">census_api_key</span>(<span class="st">"12db876db6814295f40abdb4d6a0547fe2e575db"</span>)</span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a>county_households <span class="ot">&lt;-</span> <span class="fu">get_acs</span>(<span class="at">geography =</span> <span class="st">"county"</span>,</span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a>        <span class="at">variables =</span> <span class="st">"B25003_001"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">state =</span> <span class="fu">str_sub</span>(GEOID, <span class="dv">1</span>, <span class="dv">2</span>),</span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a>         <span class="at">county =</span> <span class="fu">str_sub</span>(GEOID, <span class="dv">3</span>, <span class="dv">5</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">hh_percentile =</span> <span class="fu">percent_rank</span>(estimate)) <span class="sc">%&gt;%</span> </span>
<span id="cb4-8"><a href="#cb4-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(state, county, hh_percentile) </span>
<span id="cb4-9"><a href="#cb4-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-10"><a href="#cb4-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-11"><a href="#cb4-11" aria-hidden="true" tabindex="-1"></a>comparable_county_quality <span class="ot">&lt;-</span> metrics_county <span class="sc">%&gt;%</span> </span>
<span id="cb4-12"><a href="#cb4-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(county_households, <span class="at">by =</span> <span class="fu">c</span>(<span class="st">"state"</span> <span class="ot">=</span> <span class="st">"state"</span>, <span class="st">"county"</span> <span class="ot">=</span> <span class="st">"county"</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb4-13"><a href="#cb4-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(hh_percentile <span class="sc">&gt;</span> <span class="fl">0.95</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb4-14"><a href="#cb4-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(county_name, state_name, <span class="fu">ends_with</span>(<span class="st">"_quality"</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb4-15"><a href="#cb4-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_longer</span>(<span class="at">cols =</span> <span class="sc">-</span><span class="fu">c</span>(state_name, county_name)) <span class="sc">%&gt;%</span></span>
<span id="cb4-16"><a href="#cb4-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(state_name, county_name) <span class="sc">%&gt;%</span></span>
<span id="cb4-17"><a href="#cb4-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">quality_good =</span> <span class="fu">sum</span>(value <span class="sc">==</span> <span class="dv">1</span>, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb4-18"><a href="#cb4-18" aria-hidden="true" tabindex="-1"></a>            <span class="at">quality_marginal =</span> <span class="fu">sum</span>(value <span class="sc">==</span> <span class="dv">2</span>, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb4-19"><a href="#cb4-19" aria-hidden="true" tabindex="-1"></a>            <span class="at">quality_poor =</span> <span class="fu">sum</span>(value <span class="sc">==</span> <span class="dv">3</span>, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb4-20"><a href="#cb4-20" aria-hidden="true" tabindex="-1"></a>            <span class="at">missing_values =</span> <span class="fu">sum</span>(<span class="fu">is.na</span>(value))) <span class="sc">%&gt;%</span> </span>
<span id="cb4-21"><a href="#cb4-21" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">total_metrics =</span> quality_good <span class="sc">+</span> quality_marginal <span class="sc">+</span> quality_poor <span class="sc">+</span> missing_values,</span>
<span id="cb4-22"><a href="#cb4-22" aria-hidden="true" tabindex="-1"></a>         <span class="at">shr_good =</span> quality_good <span class="sc">/</span> total_metrics,</span>
<span id="cb4-23"><a href="#cb4-23" aria-hidden="true" tabindex="-1"></a>         <span class="at">shr_poor =</span> quality_poor <span class="sc">/</span> total_metrics,</span>
<span id="cb4-24"><a href="#cb4-24" aria-hidden="true" tabindex="-1"></a>         <span class="at">shr_missing =</span> missing_values <span class="sc">/</span> total_metrics,</span>
<span id="cb4-25"><a href="#cb4-25" aria-hidden="true" tabindex="-1"></a>         <span class="at">good_score =</span> quality_good <span class="sc">*</span> <span class="dv">2</span>,</span>
<span id="cb4-26"><a href="#cb4-26" aria-hidden="true" tabindex="-1"></a>         <span class="at">marginal_score =</span> quality_marginal,</span>
<span id="cb4-27"><a href="#cb4-27" aria-hidden="true" tabindex="-1"></a>         <span class="at">poor_score =</span> quality_poor <span class="sc">*</span> <span class="sc">-</span><span class="dv">1</span>,</span>
<span id="cb4-28"><a href="#cb4-28" aria-hidden="true" tabindex="-1"></a>         <span class="at">missing_score =</span> missing_values <span class="sc">*</span> <span class="sc">-</span><span class="dv">2</span>,</span>
<span id="cb4-29"><a href="#cb4-29" aria-hidden="true" tabindex="-1"></a>         <span class="at">total_score =</span> good_score <span class="sc">+</span> marginal_score <span class="sc">+</span> poor_score <span class="sc">+</span> missing_score) </span>
<span id="cb4-30"><a href="#cb4-30" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-31"><a href="#cb4-31" aria-hidden="true" tabindex="-1"></a><span class="co">#write_csv(comparable_county_quality, here::here("10_construct-database", "mobility-metrics-quality-county-comp.csv"))</span></span>
<span id="cb4-32"><a href="#cb4-32" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-33"><a href="#cb4-33" aria-hidden="true" tabindex="-1"></a>comparable_county_quality <span class="sc">%&gt;%</span></span>
<span id="cb4-34"><a href="#cb4-34" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(state_name, county_name, total_score, shr_good, shr_missing) <span class="sc">%&gt;%</span> </span>
<span id="cb4-35"><a href="#cb4-35" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(total_score)) <span class="sc">%&gt;%</span> </span>
<span id="cb4-36"><a href="#cb4-36" aria-hidden="true" tabindex="-1"></a>  <span class="fu">head</span>(<span class="dv">15</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb4-37"><a href="#cb4-37" aria-hidden="true" tabindex="-1"></a>  <span class="fu">reactable</span>(</span>
<span id="cb4-38"><a href="#cb4-38" aria-hidden="true" tabindex="-1"></a>    <span class="co"># columns = list(</span></span>
<span id="cb4-39"><a href="#cb4-39" aria-hidden="true" tabindex="-1"></a>    <span class="co">#   density = colDef(format = colFormat(digits = 1)),</span></span>
<span id="cb4-40"><a href="#cb4-40" aria-hidden="true" tabindex="-1"></a>    <span class="co">#   non_hispanic_white = colDef(format = colFormat(digits = 2)),</span></span>
<span id="cb4-41"><a href="#cb4-41" aria-hidden="true" tabindex="-1"></a>    <span class="co">#   black = colDef(format = colFormat(digits = 2)),</span></span>
<span id="cb4-42"><a href="#cb4-42" aria-hidden="true" tabindex="-1"></a>    <span class="co">#   hispanic_or_latino = colDef(format = colFormat(digits = 2)),</span></span>
<span id="cb4-43"><a href="#cb4-43" aria-hidden="true" tabindex="-1"></a>    <span class="co">#   foreign_born = colDef(format = colFormat(digits = 2)),</span></span>
<span id="cb4-44"><a href="#cb4-44" aria-hidden="true" tabindex="-1"></a>    <span class="co">#   poverty = colDef(format = colFormat(digits = 2))</span></span>
<span id="cb4-45"><a href="#cb4-45" aria-hidden="true" tabindex="-1"></a>    <span class="co"># ),</span></span>
<span id="cb4-46"><a href="#cb4-46" aria-hidden="true" tabindex="-1"></a>    <span class="at">filterable =</span> <span class="cn">TRUE</span>,</span>
<span id="cb4-47"><a href="#cb4-47" aria-hidden="true" tabindex="-1"></a>    <span class="at">searchable =</span> <span class="cn">FALSE</span>,</span>
<span id="cb4-48"><a href="#cb4-48" aria-hidden="true" tabindex="-1"></a>    <span class="at">defaultPageSize =</span> <span class="dv">15</span>,</span>
<span id="cb4-49"><a href="#cb4-49" aria-hidden="true" tabindex="-1"></a>    <span class="at">highlight =</span> <span class="cn">TRUE</span></span>
<span id="cb4-50"><a href="#cb4-50" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">

<div class="reactable html-widget html-fill-item-overflow-hidden html-fill-item" id="htmlwidget-26afa852b15d49bc7845" style="width:auto;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-26afa852b15d49bc7845">{"x":{"tag":{"name":"Reactable","attribs":{"data":{"state_name":["Connecticut","Rhode Island","Virginia","Michigan","Texas","Alabama","Connecticut","Connecticut","Delaware","District of Columbia","Georgia","Georgia","Georgia","Illinois","Illinois"],"county_name":["Fairfield County","Providence County","Virginia Beach city","Wayne County","Denton County","Jefferson County","Hartford County","New Haven County","New Castle County","District of Columbia","Cobb County","DeKalb County","Fulton County","DuPage County","Will County"],"total_score":[66,66,66,65,65,64,64,64,64,64,64,64,64,64,64],"shr_good":[1,1,1,0.96969696969697,0.96969696969697,0.939393939393939,0.939393939393939,0.939393939393939,0.939393939393939,0.939393939393939,0.939393939393939,0.939393939393939,0.939393939393939,0.939393939393939,0.939393939393939],"shr_missing":[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]},"columns":[{"id":"state_name","name":"state_name","type":"character"},{"id":"county_name","name":"county_name","type":"character"},{"id":"total_score","name":"total_score","type":"numeric"},{"id":"shr_good","name":"shr_good","type":"numeric"},{"id":"shr_missing","name":"shr_missing","type":"numeric"}],"filterable":true,"defaultPageSize":15,"highlight":true,"dataKey":"5cdd01a067d24fa85481b47128b73fa5"},"children":[]},"class":"reactR_markup"},"evals":[],"jsHooks":[]}</script>
</div>
</div>
<p>This table shows the 15 lowest quality counties in the 95th percentile based on household size using the scoring method described above. The low scores are much higher than when we look at the total county population, with the lowest being a score of 55 (still 90 percent of variables have “good” quality)</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>comparable_county_quality <span class="sc">%&gt;%</span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(state_name, county_name, total_score, shr_good, shr_missing) <span class="sc">%&gt;%</span> </span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(total_score) <span class="sc">%&gt;%</span> </span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">head</span>(<span class="dv">15</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">reactable</span>(</span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a>    <span class="co"># columns = list(</span></span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a>    <span class="co">#   density = colDef(format = colFormat(digits = 1)),</span></span>
<span id="cb5-8"><a href="#cb5-8" aria-hidden="true" tabindex="-1"></a>    <span class="co">#   non_hispanic_white = colDef(format = colFormat(digits = 2)),</span></span>
<span id="cb5-9"><a href="#cb5-9" aria-hidden="true" tabindex="-1"></a>    <span class="co">#   black = colDef(format = colFormat(digits = 2)),</span></span>
<span id="cb5-10"><a href="#cb5-10" aria-hidden="true" tabindex="-1"></a>    <span class="co">#   hispanic_or_latino = colDef(format = colFormat(digits = 2)),</span></span>
<span id="cb5-11"><a href="#cb5-11" aria-hidden="true" tabindex="-1"></a>    <span class="co">#   foreign_born = colDef(format = colFormat(digits = 2)),</span></span>
<span id="cb5-12"><a href="#cb5-12" aria-hidden="true" tabindex="-1"></a>    <span class="co">#   poverty = colDef(format = colFormat(digits = 2))</span></span>
<span id="cb5-13"><a href="#cb5-13" aria-hidden="true" tabindex="-1"></a>    <span class="co"># ),</span></span>
<span id="cb5-14"><a href="#cb5-14" aria-hidden="true" tabindex="-1"></a>    <span class="at">filterable =</span> <span class="cn">TRUE</span>,</span>
<span id="cb5-15"><a href="#cb5-15" aria-hidden="true" tabindex="-1"></a>    <span class="at">searchable =</span> <span class="cn">FALSE</span>,</span>
<span id="cb5-16"><a href="#cb5-16" aria-hidden="true" tabindex="-1"></a>    <span class="at">defaultPageSize =</span> <span class="dv">15</span>,</span>
<span id="cb5-17"><a href="#cb5-17" aria-hidden="true" tabindex="-1"></a>    <span class="at">highlight =</span> <span class="cn">TRUE</span></span>
<span id="cb5-18"><a href="#cb5-18" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">

<div class="reactable html-widget html-fill-item-overflow-hidden html-fill-item" id="htmlwidget-438be97a74a2dcb67d47" style="width:auto;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-438be97a74a2dcb67d47">{"x":{"tag":{"name":"Reactable","attribs":{"data":{"state_name":["California","California","California","California","Florida","New York","New York","New York","New York","New York","Pennsylvania","Pennsylvania","Pennsylvania","South Carolina","New York"],"county_name":["San Mateo County","Sonoma County","Stanislaus County","Ventura County","Sarasota County","Bronx County","Kings County","Onondaga County","Queens County","Richmond County","Bucks County","Chester County","Delaware County","Charleston County","Erie County"],"total_score":[55,55,55,55,55,55,55,55,55,55,55,55,55,55,56],"shr_good":[0.909090909090909,0.909090909090909,0.909090909090909,0.909090909090909,0.909090909090909,0.909090909090909,0.909090909090909,0.909090909090909,0.909090909090909,0.909090909090909,0.909090909090909,0.909090909090909,0.909090909090909,0.666666666666667,0.909090909090909],"shr_missing":[0.0606060606060606,0.0606060606060606,0.0606060606060606,0.0606060606060606,0.0606060606060606,0.0606060606060606,0.0606060606060606,0.0606060606060606,0.0606060606060606,0.0606060606060606,0.0606060606060606,0.0606060606060606,0.0606060606060606,0,0.0303030303030303]},"columns":[{"id":"state_name","name":"state_name","type":"character"},{"id":"county_name","name":"county_name","type":"character"},{"id":"total_score","name":"total_score","type":"numeric"},{"id":"shr_good","name":"shr_good","type":"numeric"},{"id":"shr_missing","name":"shr_missing","type":"numeric"}],"filterable":true,"defaultPageSize":15,"highlight":true,"dataKey":"c1b630f31bf43e1460ed6da19744964b"},"children":[]},"class":"reactR_markup"},"evals":[],"jsHooks":[]}</script>
</div>
</div>
</section>
</section>
<section id="file-quality-place" class="level1">
<h1>File Quality Place</h1>
<section id="all-places-in-dataset" class="level2">
<h2 class="anchored" data-anchor-id="all-places-in-dataset">All places in dataset</h2>
<p>The following table shows the 15 “highest” data quality places based on the same scoring method for counties. Because of the variables includes for place differ, the high score is now 54. Only one place has a “perfect score” in the top 15. Chicago is in the top 15 based on this quality metric.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>metrics_place <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(here<span class="sc">::</span><span class="fu">here</span>(<span class="st">"data"</span>, <span class="st">"05_mobility-metrics_place_recent.csv"</span>))</span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a>metrics_quality_place <span class="ot">&lt;-</span> metrics_place <span class="sc">%&gt;%</span></span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(place_name, state_name, <span class="fu">ends_with</span>(<span class="st">"_quality"</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_longer</span>(<span class="at">cols =</span> <span class="sc">-</span><span class="fu">c</span>(state_name, place_name)) <span class="sc">%&gt;%</span></span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(state_name, place_name) <span class="sc">%&gt;%</span></span>
<span id="cb6-7"><a href="#cb6-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">quality_good =</span> <span class="fu">sum</span>(value <span class="sc">==</span> <span class="dv">1</span>, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb6-8"><a href="#cb6-8" aria-hidden="true" tabindex="-1"></a>            <span class="at">quality_marginal =</span> <span class="fu">sum</span>(value <span class="sc">==</span> <span class="dv">2</span>, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb6-9"><a href="#cb6-9" aria-hidden="true" tabindex="-1"></a>            <span class="at">quality_poor =</span> <span class="fu">sum</span>(value <span class="sc">==</span> <span class="dv">3</span>, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb6-10"><a href="#cb6-10" aria-hidden="true" tabindex="-1"></a>            <span class="at">missing_values =</span> <span class="fu">sum</span>(<span class="fu">is.na</span>(value))) <span class="sc">%&gt;%</span> </span>
<span id="cb6-11"><a href="#cb6-11" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">total_metrics =</span> quality_good <span class="sc">+</span> quality_marginal <span class="sc">+</span> quality_poor <span class="sc">+</span> missing_values,</span>
<span id="cb6-12"><a href="#cb6-12" aria-hidden="true" tabindex="-1"></a>         <span class="at">shr_good =</span> quality_good <span class="sc">/</span> total_metrics,</span>
<span id="cb6-13"><a href="#cb6-13" aria-hidden="true" tabindex="-1"></a>         <span class="at">shr_poor =</span> quality_poor <span class="sc">/</span> total_metrics,</span>
<span id="cb6-14"><a href="#cb6-14" aria-hidden="true" tabindex="-1"></a>         <span class="at">shr_missing =</span> missing_values <span class="sc">/</span> total_metrics,</span>
<span id="cb6-15"><a href="#cb6-15" aria-hidden="true" tabindex="-1"></a>         <span class="co">#Create a scoring system: Good data quality is weighted by 2, marginal by 1, poor by -1 and missing by -2</span></span>
<span id="cb6-16"><a href="#cb6-16" aria-hidden="true" tabindex="-1"></a>         <span class="at">good_score =</span> quality_good <span class="sc">*</span> <span class="dv">2</span>,</span>
<span id="cb6-17"><a href="#cb6-17" aria-hidden="true" tabindex="-1"></a>         <span class="at">marginal_score =</span> quality_marginal,</span>
<span id="cb6-18"><a href="#cb6-18" aria-hidden="true" tabindex="-1"></a>         <span class="at">poor_score =</span> quality_poor <span class="sc">*</span> <span class="sc">-</span><span class="dv">1</span>,</span>
<span id="cb6-19"><a href="#cb6-19" aria-hidden="true" tabindex="-1"></a>         <span class="at">missing_score =</span> missing_values <span class="sc">*</span> <span class="sc">-</span><span class="dv">2</span>,</span>
<span id="cb6-20"><a href="#cb6-20" aria-hidden="true" tabindex="-1"></a>         <span class="at">total_score =</span> good_score <span class="sc">+</span> marginal_score <span class="sc">+</span> poor_score <span class="sc">+</span> missing_score) </span>
<span id="cb6-21"><a href="#cb6-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-22"><a href="#cb6-22" aria-hidden="true" tabindex="-1"></a>metrics_quality_place <span class="sc">%&gt;%</span></span>
<span id="cb6-23"><a href="#cb6-23" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(state_name, place_name, total_score, shr_good, shr_missing) <span class="sc">%&gt;%</span> </span>
<span id="cb6-24"><a href="#cb6-24" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(total_score)) <span class="sc">%&gt;%</span> </span>
<span id="cb6-25"><a href="#cb6-25" aria-hidden="true" tabindex="-1"></a>  <span class="fu">head</span>(<span class="dv">15</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb6-26"><a href="#cb6-26" aria-hidden="true" tabindex="-1"></a>  <span class="fu">reactable</span>(</span>
<span id="cb6-27"><a href="#cb6-27" aria-hidden="true" tabindex="-1"></a>    <span class="co"># columns = list(</span></span>
<span id="cb6-28"><a href="#cb6-28" aria-hidden="true" tabindex="-1"></a>    <span class="co">#   density = colDef(format = colFormat(digits = 1)),</span></span>
<span id="cb6-29"><a href="#cb6-29" aria-hidden="true" tabindex="-1"></a>    <span class="co">#   non_hispanic_white = colDef(format = colFormat(digits = 2)),</span></span>
<span id="cb6-30"><a href="#cb6-30" aria-hidden="true" tabindex="-1"></a>    <span class="co">#   black = colDef(format = colFormat(digits = 2)),</span></span>
<span id="cb6-31"><a href="#cb6-31" aria-hidden="true" tabindex="-1"></a>    <span class="co">#   hispanic_or_latino = colDef(format = colFormat(digits = 2)),</span></span>
<span id="cb6-32"><a href="#cb6-32" aria-hidden="true" tabindex="-1"></a>    <span class="co">#   foreign_born = colDef(format = colFormat(digits = 2)),</span></span>
<span id="cb6-33"><a href="#cb6-33" aria-hidden="true" tabindex="-1"></a>    <span class="co">#   poverty = colDef(format = colFormat(digits = 2))</span></span>
<span id="cb6-34"><a href="#cb6-34" aria-hidden="true" tabindex="-1"></a>    <span class="co"># ),</span></span>
<span id="cb6-35"><a href="#cb6-35" aria-hidden="true" tabindex="-1"></a>    <span class="at">filterable =</span> <span class="cn">TRUE</span>,</span>
<span id="cb6-36"><a href="#cb6-36" aria-hidden="true" tabindex="-1"></a>    <span class="at">searchable =</span> <span class="cn">TRUE</span>,</span>
<span id="cb6-37"><a href="#cb6-37" aria-hidden="true" tabindex="-1"></a>    <span class="at">defaultPageSize =</span> <span class="dv">20</span>,</span>
<span id="cb6-38"><a href="#cb6-38" aria-hidden="true" tabindex="-1"></a>    <span class="at">highlight =</span> <span class="cn">TRUE</span></span>
<span id="cb6-39"><a href="#cb6-39" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">

<div class="reactable html-widget html-fill-item-overflow-hidden html-fill-item" id="htmlwidget-51667c4f070c35b47356" style="width:auto;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-51667c4f070c35b47356">{"x":{"tag":{"name":"Reactable","attribs":{"data":{"state_name":["Virginia","Michigan","Minnesota","Texas","Virginia","District of Columbia","Oregon","Pennsylvania","Tennessee","California","Georgia","Illinois","Ohio","Tennessee","Wisconsin"],"place_name":["Virginia Beach city","Detroit city","Minneapolis city","El Paso city","Chesapeake city","Washington city","Portland city","Philadelphia city","Nashville-Davidson metropolitan government (balance)","San Diego city","Atlanta city","Chicago city","Toledo city","Memphis city","Milwaukee city"],"total_score":[54,53,53,53,53,52,52,52,52,51,51,51,51,51,51],"shr_good":[1,0.962962962962963,0.962962962962963,0.962962962962963,0.962962962962963,0.925925925925926,0.925925925925926,0.925925925925926,0.925925925925926,0.888888888888889,0.888888888888889,0.888888888888889,0.888888888888889,0.888888888888889,0.888888888888889],"shr_missing":[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]},"columns":[{"id":"state_name","name":"state_name","type":"character"},{"id":"place_name","name":"place_name","type":"character"},{"id":"total_score","name":"total_score","type":"numeric"},{"id":"shr_good","name":"shr_good","type":"numeric"},{"id":"shr_missing","name":"shr_missing","type":"numeric"}],"filterable":true,"searchable":true,"defaultPageSize":20,"highlight":true,"dataKey":"e844b6e7e46575b638e788667f17cc17"},"children":[]},"class":"reactR_markup"},"evals":[],"jsHooks":[]}</script>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="co">#write_csv(metrics_quality_place, here::here("10_construct-database", "mobility-metrics-quality-place.csv"))</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>The following table shows the 15 “lowest” data quality places based on the scoring metric described above. The lowest possible score is -54. The lowest scoring place is -8, which only has 14% of metrics as good quality.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a>metrics_quality_place <span class="sc">%&gt;%</span></span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(state_name, place_name, total_score, shr_good, shr_missing) <span class="sc">%&gt;%</span> </span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(total_score) <span class="sc">%&gt;%</span> </span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">head</span>(<span class="dv">15</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(total_score) <span class="sc">%&gt;%</span> </span>
<span id="cb8-6"><a href="#cb8-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">reactable</span>(</span>
<span id="cb8-7"><a href="#cb8-7" aria-hidden="true" tabindex="-1"></a>    <span class="co"># columns = list(</span></span>
<span id="cb8-8"><a href="#cb8-8" aria-hidden="true" tabindex="-1"></a>    <span class="co">#   density = colDef(format = colFormat(digits = 1)),</span></span>
<span id="cb8-9"><a href="#cb8-9" aria-hidden="true" tabindex="-1"></a>    <span class="co">#   non_hispanic_white = colDef(format = colFormat(digits = 2)),</span></span>
<span id="cb8-10"><a href="#cb8-10" aria-hidden="true" tabindex="-1"></a>    <span class="co">#   black = colDef(format = colFormat(digits = 2)),</span></span>
<span id="cb8-11"><a href="#cb8-11" aria-hidden="true" tabindex="-1"></a>    <span class="co">#   hispanic_or_latino = colDef(format = colFormat(digits = 2)),</span></span>
<span id="cb8-12"><a href="#cb8-12" aria-hidden="true" tabindex="-1"></a>    <span class="co">#   foreign_born = colDef(format = colFormat(digits = 2)),</span></span>
<span id="cb8-13"><a href="#cb8-13" aria-hidden="true" tabindex="-1"></a>    <span class="co">#   poverty = colDef(format = colFormat(digits = 2))</span></span>
<span id="cb8-14"><a href="#cb8-14" aria-hidden="true" tabindex="-1"></a>    <span class="co"># ),</span></span>
<span id="cb8-15"><a href="#cb8-15" aria-hidden="true" tabindex="-1"></a>    <span class="at">filterable =</span> <span class="cn">TRUE</span>,</span>
<span id="cb8-16"><a href="#cb8-16" aria-hidden="true" tabindex="-1"></a>    <span class="at">searchable =</span> <span class="cn">TRUE</span>,</span>
<span id="cb8-17"><a href="#cb8-17" aria-hidden="true" tabindex="-1"></a>    <span class="at">defaultPageSize =</span> <span class="dv">20</span>,</span>
<span id="cb8-18"><a href="#cb8-18" aria-hidden="true" tabindex="-1"></a>    <span class="at">highlight =</span> <span class="cn">TRUE</span></span>
<span id="cb8-19"><a href="#cb8-19" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">

<div class="reactable html-widget html-fill-item-overflow-hidden html-fill-item" id="htmlwidget-14bbf38bfd9f52b034cb" style="width:auto;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-14bbf38bfd9f52b034cb">{"x":{"tag":{"name":"Reactable","attribs":{"data":{"state_name":["Georgia","Utah","California","California","Texas","Florida","California","Florida","California","Florida","Florida","Utah","California","California","California"],"place_name":["South Fulton city","Lehi city","Lake Forest city","Newport Beach city","Cedar Park city","Palm Coast city","Tustin city","Deltona city","Pleasanton city","Doral city","North Port city","South Jordan city","Buena Park city","Indio city","Manteca city"],"total_score":[-8,0,2,6,7,8,9,9,10,10,10,10,11,11,11],"shr_good":[0.142857142857143,0.296296296296296,0.37037037037037,0.407407407407407,0.407407407407407,0.37037037037037,0.407407407407407,0.407407407407407,0.444444444444444,0.37037037037037,0.37037037037037,0.407407407407407,0.481481481481481,0.333333333333333,0.481481481481481],"shr_missing":[0.357142857142857,0.185185185185185,0.185185185185185,0.148148148148148,0.111111111111111,0.185185185185185,0.111111111111111,0.185185185185185,0.111111111111111,0.185185185185185,0.185185185185185,0.0740740740740741,0.111111111111111,0.185185185185185,0.111111111111111]},"columns":[{"id":"state_name","name":"state_name","type":"character"},{"id":"place_name","name":"place_name","type":"character"},{"id":"total_score","name":"total_score","type":"numeric"},{"id":"shr_good","name":"shr_good","type":"numeric"},{"id":"shr_missing","name":"shr_missing","type":"numeric"}],"filterable":true,"searchable":true,"defaultPageSize":20,"highlight":true,"dataKey":"e596fec5e28bac08e8e55815404a3fc0"},"children":[]},"class":"reactR_markup"},"evals":[],"jsHooks":[]}</script>
</div>
</div>
</section>
<section id="comparable-places" class="level2">
<h2 class="anchored" data-anchor-id="comparable-places">Comparable places</h2>
<p>The City of Chicago is in the high 99th percentile of places included in the metric dataset. This table shows the 15 highest quality places in the 99th percentile based on household size using the scoring method described above. The list of best quality is very similar.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a>place_households <span class="ot">&lt;-</span> <span class="fu">get_acs</span>(<span class="at">geography =</span> <span class="st">"place"</span>,</span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>        <span class="at">variables =</span> <span class="st">"B25003_001"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">state =</span> <span class="fu">str_sub</span>(GEOID, <span class="dv">1</span>, <span class="dv">2</span>),</span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a>         <span class="at">place =</span> <span class="fu">str_sub</span>(GEOID, <span class="dv">3</span>, <span class="dv">7</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">hh_percentile =</span> <span class="fu">percent_rank</span>(estimate)) <span class="sc">%&gt;%</span> </span>
<span id="cb9-6"><a href="#cb9-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(state, place, hh_percentile) </span>
<span id="cb9-7"><a href="#cb9-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-8"><a href="#cb9-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-9"><a href="#cb9-9" aria-hidden="true" tabindex="-1"></a>comparable_place_quality <span class="ot">&lt;-</span> metrics_place <span class="sc">%&gt;%</span></span>
<span id="cb9-10"><a href="#cb9-10" aria-hidden="true" tabindex="-1"></a>   <span class="fu">left_join</span>(place_households, <span class="at">by =</span> <span class="fu">c</span>(<span class="st">"state"</span> <span class="ot">=</span> <span class="st">"state"</span>, <span class="st">"place"</span> <span class="ot">=</span> <span class="st">"place"</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb9-11"><a href="#cb9-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(hh_percentile <span class="sc">&gt;</span> <span class="fl">0.99</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb9-12"><a href="#cb9-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(place_name, state_name, <span class="fu">ends_with</span>(<span class="st">"_quality"</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb9-13"><a href="#cb9-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_longer</span>(<span class="at">cols =</span> <span class="sc">-</span><span class="fu">c</span>(state_name, place_name)) <span class="sc">%&gt;%</span></span>
<span id="cb9-14"><a href="#cb9-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(state_name, place_name) <span class="sc">%&gt;%</span></span>
<span id="cb9-15"><a href="#cb9-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">quality_good =</span> <span class="fu">sum</span>(value <span class="sc">==</span> <span class="dv">1</span>, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb9-16"><a href="#cb9-16" aria-hidden="true" tabindex="-1"></a>            <span class="at">quality_marginal =</span> <span class="fu">sum</span>(value <span class="sc">==</span> <span class="dv">2</span>, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb9-17"><a href="#cb9-17" aria-hidden="true" tabindex="-1"></a>            <span class="at">quality_poor =</span> <span class="fu">sum</span>(value <span class="sc">==</span> <span class="dv">3</span>, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb9-18"><a href="#cb9-18" aria-hidden="true" tabindex="-1"></a>            <span class="at">missing_values =</span> <span class="fu">sum</span>(<span class="fu">is.na</span>(value))) <span class="sc">%&gt;%</span> </span>
<span id="cb9-19"><a href="#cb9-19" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">total_metrics =</span> quality_good <span class="sc">+</span> quality_marginal <span class="sc">+</span> quality_poor <span class="sc">+</span> missing_values,</span>
<span id="cb9-20"><a href="#cb9-20" aria-hidden="true" tabindex="-1"></a>         <span class="at">shr_good =</span> quality_good <span class="sc">/</span> total_metrics,</span>
<span id="cb9-21"><a href="#cb9-21" aria-hidden="true" tabindex="-1"></a>         <span class="at">shr_poor =</span> quality_poor <span class="sc">/</span> total_metrics,</span>
<span id="cb9-22"><a href="#cb9-22" aria-hidden="true" tabindex="-1"></a>         <span class="at">shr_missing =</span> missing_values <span class="sc">/</span> total_metrics,</span>
<span id="cb9-23"><a href="#cb9-23" aria-hidden="true" tabindex="-1"></a>          <span class="co">#Create a scoring system: Good data quality is weighted by 2, marginal by 1, poor by -1 and missing by -2</span></span>
<span id="cb9-24"><a href="#cb9-24" aria-hidden="true" tabindex="-1"></a>         <span class="at">good_score =</span> quality_good <span class="sc">*</span> <span class="dv">2</span>,</span>
<span id="cb9-25"><a href="#cb9-25" aria-hidden="true" tabindex="-1"></a>         <span class="at">marginal_score =</span> quality_marginal,</span>
<span id="cb9-26"><a href="#cb9-26" aria-hidden="true" tabindex="-1"></a>         <span class="at">poor_score =</span> quality_poor <span class="sc">*</span> <span class="sc">-</span><span class="dv">1</span>,</span>
<span id="cb9-27"><a href="#cb9-27" aria-hidden="true" tabindex="-1"></a>         <span class="at">missing_score =</span> missing_values <span class="sc">*</span> <span class="sc">-</span><span class="dv">2</span>,</span>
<span id="cb9-28"><a href="#cb9-28" aria-hidden="true" tabindex="-1"></a>         <span class="at">total_score =</span> good_score <span class="sc">+</span> marginal_score <span class="sc">+</span> poor_score <span class="sc">+</span> missing_score) </span>
<span id="cb9-29"><a href="#cb9-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-30"><a href="#cb9-30" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-31"><a href="#cb9-31" aria-hidden="true" tabindex="-1"></a>comparable_place_quality <span class="sc">%&gt;%</span></span>
<span id="cb9-32"><a href="#cb9-32" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(state_name, place_name, total_score, shr_good, shr_missing) <span class="sc">%&gt;%</span> </span>
<span id="cb9-33"><a href="#cb9-33" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(total_score)) <span class="sc">%&gt;%</span> </span>
<span id="cb9-34"><a href="#cb9-34" aria-hidden="true" tabindex="-1"></a>  <span class="fu">head</span>(<span class="dv">15</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb9-35"><a href="#cb9-35" aria-hidden="true" tabindex="-1"></a>  <span class="fu">reactable</span>(</span>
<span id="cb9-36"><a href="#cb9-36" aria-hidden="true" tabindex="-1"></a>    <span class="co"># columns = list(</span></span>
<span id="cb9-37"><a href="#cb9-37" aria-hidden="true" tabindex="-1"></a>    <span class="co">#   density = colDef(format = colFormat(digits = 1)),</span></span>
<span id="cb9-38"><a href="#cb9-38" aria-hidden="true" tabindex="-1"></a>    <span class="co">#   non_hispanic_white = colDef(format = colFormat(digits = 2)),</span></span>
<span id="cb9-39"><a href="#cb9-39" aria-hidden="true" tabindex="-1"></a>    <span class="co">#   black = colDef(format = colFormat(digits = 2)),</span></span>
<span id="cb9-40"><a href="#cb9-40" aria-hidden="true" tabindex="-1"></a>    <span class="co">#   hispanic_or_latino = colDef(format = colFormat(digits = 2)),</span></span>
<span id="cb9-41"><a href="#cb9-41" aria-hidden="true" tabindex="-1"></a>    <span class="co">#   foreign_born = colDef(format = colFormat(digits = 2)),</span></span>
<span id="cb9-42"><a href="#cb9-42" aria-hidden="true" tabindex="-1"></a>    <span class="co">#   poverty = colDef(format = colFormat(digits = 2))</span></span>
<span id="cb9-43"><a href="#cb9-43" aria-hidden="true" tabindex="-1"></a>    <span class="co"># ),</span></span>
<span id="cb9-44"><a href="#cb9-44" aria-hidden="true" tabindex="-1"></a>    <span class="at">filterable =</span> <span class="cn">TRUE</span>,</span>
<span id="cb9-45"><a href="#cb9-45" aria-hidden="true" tabindex="-1"></a>    <span class="at">searchable =</span> <span class="cn">TRUE</span>,</span>
<span id="cb9-46"><a href="#cb9-46" aria-hidden="true" tabindex="-1"></a>    <span class="at">defaultPageSize =</span> <span class="dv">20</span>,</span>
<span id="cb9-47"><a href="#cb9-47" aria-hidden="true" tabindex="-1"></a>    <span class="at">highlight =</span> <span class="cn">TRUE</span></span>
<span id="cb9-48"><a href="#cb9-48" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">

<div class="reactable html-widget html-fill-item-overflow-hidden html-fill-item" id="htmlwidget-b379c4abdcf5bec2650a" style="width:auto;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-b379c4abdcf5bec2650a">{"x":{"tag":{"name":"Reactable","attribs":{"data":{"state_name":["Virginia","Michigan","Minnesota","Texas","Virginia","District of Columbia","Oregon","Pennsylvania","Tennessee","California","Georgia","Illinois","Ohio","Tennessee","Wisconsin"],"place_name":["Virginia Beach city","Detroit city","Minneapolis city","El Paso city","Chesapeake city","Washington city","Portland city","Philadelphia city","Nashville-Davidson metropolitan government (balance)","San Diego city","Atlanta city","Chicago city","Toledo city","Memphis city","Milwaukee city"],"total_score":[54,53,53,53,53,52,52,52,52,51,51,51,51,51,51],"shr_good":[1,0.962962962962963,0.962962962962963,0.962962962962963,0.962962962962963,0.925925925925926,0.925925925925926,0.925925925925926,0.925925925925926,0.888888888888889,0.888888888888889,0.888888888888889,0.888888888888889,0.888888888888889,0.888888888888889],"shr_missing":[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]},"columns":[{"id":"state_name","name":"state_name","type":"character"},{"id":"place_name","name":"place_name","type":"character"},{"id":"total_score","name":"total_score","type":"numeric"},{"id":"shr_good","name":"shr_good","type":"numeric"},{"id":"shr_missing","name":"shr_missing","type":"numeric"}],"filterable":true,"searchable":true,"defaultPageSize":20,"highlight":true,"dataKey":"e844b6e7e46575b638e788667f17cc17"},"children":[]},"class":"reactR_markup"},"evals":[],"jsHooks":[]}</script>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="co">#write_csv(comparable_place_quality, here::here("10_construct-database", "mobility-metrics-quality-place-comp.csv"))</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>The City of Chicago is in the high 99th percentile of places included in the metric dataset. This table shows the 15 highest quality places in the 99th percentile based on household size using the scoring method described above.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a>comparable_place_quality <span class="sc">%&gt;%</span></span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(state_name, place_name, total_score, shr_good, shr_missing) <span class="sc">%&gt;%</span> </span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(total_score) <span class="sc">%&gt;%</span> </span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">head</span>(<span class="dv">15</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">reactable</span>(</span>
<span id="cb11-6"><a href="#cb11-6" aria-hidden="true" tabindex="-1"></a>    <span class="co"># columns = list(</span></span>
<span id="cb11-7"><a href="#cb11-7" aria-hidden="true" tabindex="-1"></a>    <span class="co">#   density = colDef(format = colFormat(digits = 1)),</span></span>
<span id="cb11-8"><a href="#cb11-8" aria-hidden="true" tabindex="-1"></a>    <span class="co">#   non_hispanic_white = colDef(format = colFormat(digits = 2)),</span></span>
<span id="cb11-9"><a href="#cb11-9" aria-hidden="true" tabindex="-1"></a>    <span class="co">#   black = colDef(format = colFormat(digits = 2)),</span></span>
<span id="cb11-10"><a href="#cb11-10" aria-hidden="true" tabindex="-1"></a>    <span class="co">#   hispanic_or_latino = colDef(format = colFormat(digits = 2)),</span></span>
<span id="cb11-11"><a href="#cb11-11" aria-hidden="true" tabindex="-1"></a>    <span class="co">#   foreign_born = colDef(format = colFormat(digits = 2)),</span></span>
<span id="cb11-12"><a href="#cb11-12" aria-hidden="true" tabindex="-1"></a>    <span class="co">#   poverty = colDef(format = colFormat(digits = 2))</span></span>
<span id="cb11-13"><a href="#cb11-13" aria-hidden="true" tabindex="-1"></a>    <span class="co"># ),</span></span>
<span id="cb11-14"><a href="#cb11-14" aria-hidden="true" tabindex="-1"></a>    <span class="at">filterable =</span> <span class="cn">TRUE</span>,</span>
<span id="cb11-15"><a href="#cb11-15" aria-hidden="true" tabindex="-1"></a>    <span class="at">searchable =</span> <span class="cn">TRUE</span>,</span>
<span id="cb11-16"><a href="#cb11-16" aria-hidden="true" tabindex="-1"></a>    <span class="at">defaultPageSize =</span> <span class="dv">20</span>,</span>
<span id="cb11-17"><a href="#cb11-17" aria-hidden="true" tabindex="-1"></a>    <span class="at">highlight =</span> <span class="cn">TRUE</span></span>
<span id="cb11-18"><a href="#cb11-18" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">

<div class="reactable html-widget html-fill-item-overflow-hidden html-fill-item" id="htmlwidget-5dcdb5c2756cfb7edf31" style="width:auto;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-5dcdb5c2756cfb7edf31">{"x":{"tag":{"name":"Reactable","attribs":{"data":{"state_name":["Georgia","California","California","Florida","Florida","Nevada","Florida","Florida","Florida","Hawaii","California","California","Illinois","North Carolina","South Carolina"],"place_name":["South Fulton city","Newport Beach city","Concord city","Lakeland city","Pembroke Pines city","Sparks city","Miami Beach city","Clearwater city","Coral Springs city","Urban Honolulu CDP","San Mateo city","Visalia city","Joliet city","High Point city","North Charleston city"],"total_score":[-8,6,12,12,13,15,16,18,18,19,20,20,20,20,20],"shr_good":[0.142857142857143,0.407407407407407,0.518518518518518,0.37037037037037,0.407407407407407,0.407407407407407,0.37037037037037,0.37037037037037,0.592592592592593,0.555555555555556,0.481481481481481,0.592592592592593,0.444444444444444,0.444444444444444,0.444444444444444],"shr_missing":[0.357142857142857,0.148148148148148,0.111111111111111,0.185185185185185,0.185185185185185,0.111111111111111,0.185185185185185,0.185185185185185,0.185185185185185,0.259259259259259,0.148148148148148,0.111111111111111,0.037037037037037,0.111111111111111,0.111111111111111]},"columns":[{"id":"state_name","name":"state_name","type":"character"},{"id":"place_name","name":"place_name","type":"character"},{"id":"total_score","name":"total_score","type":"numeric"},{"id":"shr_good","name":"shr_good","type":"numeric"},{"id":"shr_missing","name":"shr_missing","type":"numeric"}],"filterable":true,"searchable":true,"defaultPageSize":20,"highlight":true,"dataKey":"c9eb1a769704217223339d02a4540f6f"},"children":[]},"class":"reactR_markup"},"evals":[],"jsHooks":[]}</script>
</div>
</div>
</section>
</section>

</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>